{{ header }}
<div class="container">
<div class="row">
<div id="cont" class="col-sm-12">
{{ column_left }}
{% if (column_left and column_right) %}
{% set class = 'col-sm-6' %}
{% elseif (column_left or column_right) %}
{% set class = 'col-aridius' %}
{% else %}
{% set class = 'col-sm-12' %}
{% endif %}
<div class="row">
<div id="content" class="{{ class }}">
{{ content_top }}
<div class="tab_mob_main">
<ul class="breadcrumb tab_mob_child" itemscope itemtype="http://schema.org/BreadcrumbList">
{% for i,breadcrumb in breadcrumbs %}
	{% if (i == 0) %}
		<li class="tab_mob_grandchild"><a href="{{ breadcrumb['href'] }}" class="current-link">{{ breadcrumb['text'] }}</a></li>
	{% elseif (breadcrumbs|length > i+1 ) %}
		<li class="tab_mob_grandchild" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
			<a href="{{ breadcrumb['href'] }}" itemprop="item" itemscope itemtype="https://schema.org/Thing" itemid="{{ breadcrumb['href'] }}" title="{{ breadcrumb['text'] }}"><span itemprop="name">{{ breadcrumb['text'] }}</span></a><meta itemprop="position" content="{{ i }}">
		</li>
	{% else %}
		<li class="tab_mob_grandchild" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
			<span itemprop="item" itemscope itemtype="https://schema.org/Thing" itemid="{{ breadcrumb['href'] }}" title="{{ breadcrumb['text'] }}"><span itemprop="name">{{ breadcrumb['text'] }}</span></span><meta itemprop="position" content="{{ i }}">
		</li>
	{% endif %}
{% endfor %}
</ul>
</div>
{% if (aridius_store_review_status == 1) %}
<form id="store-review" class="form-horizontal review-form" style="display: none;">
{% if (review_guest) %}
<div class="review_shop"></div>
<div class="form-group required">
<div class="col-sm-12">
<label class="control-label" for="input-name">{{ entry_name }}</label>
<input type="text" name="name" value="{{ customer_name }}" id="input-name" class="form-control"/>
</div>
</div>
<div class="form-group required">
<div class="col-sm-12">
<label class="control-label" for="input-review_shop">{{ entry_review }}</label>
<textarea name="text" rows="5" id="input-review_shop" class="form-control"></textarea>
</div>
</div>
<div class="form-group required">
<div class="col-sm-12">
<label class="control-label">{{ entry_rating }}</label>
<input type="hidden" name="rating" value="{{ aridius_store_review_default_rating }}" class="rating-tooltip"/>
</div>
</div>
{{ captcha }}
<div class="buttons clearfix">
<div class="pull-right">
<button type="submit" data-loading-text="{{ text_loading }}"  class="btn btn-primary add-review">{{ button_continue }}</button>
</div>
</div>
<input type="hidden" name="parent" value="0">
{% else %}
{{ text_login }}
<br /><br />
{% endif %}
</form>
<button type="button" class="btn btn-primary" onclick="hide_show(event, '#store-review')">{{ text_write_review }}</button>
{% if ((aridius_store_review_display_average_rating != 1) and (rating_avr >= 1)) %}
<div class="rating_avr">
<span class="rating_avrsm">{{ text_rating_avr }}</span>
<input type="hidden" class="rating" data-readonly value="{{ rating_avr|round(2) }}"/>
</div>
{% endif %}
{% if (reviews) %}
<div id="reviewst">
{% for review in reviews %}
<table class="table table-striped table-bordered">
<tr>
<td style="width: 50%;"><strong>{{ review['author'] }}</strong></td>
<td class="text-right">{{ review['date_added'] }}</td>
</tr>
<tr>
<td colspan="2">
<p>{{ review['text'] }}</p>
{% set i = 1 %}{% for i in i..5 %}
{% if (review['rating'] < i) %}
<span class="fa fa-stack"><i class="fa fa-star-o fa-stack-2x"></i></span>
{% else %}
<span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span>
{% endif %}
{% endfor %}
{% if (aridius_store_review_display_answer_button != 1) %}
<br/>
<a data-parent="{{ review['review_id'] }}" class="comment-reply" href="javascript:void(0);">{{ text_write_reply }}</a>
{% endif %}
</td>
</tr>
</table>
{% for parent in review['parent'] %}
<table class="table table-striped table-bordered review-parent">
<tr>
<td style="width: 50%;"><strong>{{ parent['author'] }}</strong></td>
<td class="text-right">{{ parent['date_added'] }}</td>
</tr>
<tr>
<td colspan="2">
<div class="review-parent-text">
<p>{{ parent['text'] }}</p>
</div>
</td>
</tr>
</table>
{% endfor %}
{% endfor %}
<div class="row">
<div class="col-sm-6 text-left">{{ pagination }}</div>
<div class="col-sm-6 text-right">{{ results }}</div>
</div>
</div>
{% else %}
<br /><br />
<p>{{ text_no_reviews }}</p>
{% endif %}
{% endif %}
{{ content_bottom }}
</div></div>
{{ column_right }}
</div>
</div>
</div>
{% if (aridius_store_review_status == 1) %}
<!-- rating -->
<style>
.symbol{display:inline-block;border-radius:50%;border:5px double #fff;width:30px;height:30px}
.symbol-empty{background-color:#ccc}
.symbol-filled{background-color:#000}
</style>
<script>
!function(a,b){"use strict";function d(d,e){this.$input=a(d),this.$rating=a("<span></span>").insertBefore(this.$input),this.options=function(d){return d.start=parseInt(d.start,10),d.start=isNaN(d.start)?b:d.start,d.stop=parseInt(d.stop,10),d.stop=isNaN(d.stop)?d.start+c||b:d.stop,d.step=parseInt(d.step,10)||b,d.fractions=Math.abs(parseInt(d.fractions,10))||b,d.scale=Math.abs(parseInt(d.scale,10))||b,d=a.extend({},a.fn.ar_rating.defaults,d),d.filledSelected=d.filledSelected||d.filled,d}(a.extend({},this.$input.data(),e)),this._init()}var c=5;d.prototype={_init:function(){for(var c=this,d=this.$input,e=this.$rating,f=function(a){return function(c){d.prop("disabled")||d.prop("readonly")||d.data("readonly")!==b||a.call(this,c)}},g=1;g<=this._rateToIndex(this.options.stop);g++){var h=a('<div class="rating-symbol"></div>').css({display:"inline-block",position:"relative"});a('<div class="rating-symbol-background '+this.options.empty+'"></div>').appendTo(h),a('<div class="rating-symbol-foreground"></div>').append("<span></span>").css({display:"inline-block",position:"absolute",overflow:"hidden",left:0,width:0}).appendTo(h),e.append(h),this.options.extendSymbol.call(h,this._indexToRate(g))}this._updateRate(d.val()),d.on("change",function(){c._updateRate(a(this).val())});var j,i=function(b){var d=a(b.currentTarget),e=(b.pageX||b.originalEvent.touches[0].pageX)-d.offset().left;return e=e>0?e:.1*c.options.scale,d.index()+e/d.width()};e.on("mousedown touchstart",".rating-symbol",f(function(a){d.val(c._indexToRate(i(a))).change()})).on("mousemove touchmove",".rating-symbol",f(function(d){var e=c._roundToFraction(i(d));e!==j&&(j!==b&&a(this).trigger("rating.rateleave"),j=e,a(this).trigger("rating.rateenter",[c._indexToRate(j)])),c._fillUntil(e)})).on("mouseleave touchend",".rating-symbol",f(function(){j=b,a(this).trigger("rating.rateleave"),c._fillUntil(c._rateToIndex(parseFloat(d.val())))}))},_fillUntil:function(a){var b=this.$rating,c=Math.floor(a);b.find(".rating-symbol-background").css("visibility","visible").slice(0,c).css("visibility","hidden");var d=b.find(".rating-symbol-foreground");d.width(0),d.slice(0,c).width("auto").find("span").attr("class",this.options.filled),d.eq(a%1?c:c-1).find("span").attr("class",this.options.filledSelected),d.eq(c).width(a%1*100+"%")},_indexToRate:function(a){return this.options.start+Math.floor(a)*this.options.step+this.options.step*this._roundToFraction(a%1)},_rateToIndex:function(a){return(a-this.options.start)/this.options.step},_roundToFraction:function(a){var b=Math.ceil(a%1*this.options.fractions)/this.options.fractions,c=Math.pow(10,this.options.scale);return Math.floor(a)+Math.floor(b*c)/c},_contains:function(a){var b=this.options.step>0?this.options.start:this.options.stop,c=this.options.step>0?this.options.stop:this.options.start;return b<=a&&a<=c},_updateRate:function(a){var b=parseFloat(a);this._contains(b)&&(this._fillUntil(this._rateToIndex(b)),this.$input.val(b))},rate:function(a){return a===b?this.$input.val():void this._updateRate(a)}},a.fn.ar_rating=function(b){var e,c=Array.prototype.slice.call(arguments,1);return this.each(function(){var f=a(this),g=f.data("rating");g||f.data("rating",g=new d(this,b)),"string"===typeof b&&"_"!==b[0]&&(e=g[b].apply(g,c))}),e||this},a.fn.ar_rating.defaults={filled:"glyphicon glyphicon-star",filledSelected:b,empty:"glyphicon glyphicon-star-empty",start:0,stop:c,step:1,fractions:1,scale:3,extendSymbol:function(){}},a(function(){a("input.rating").ar_rating()})}(jQuery);
</script>
<script>
$("#review_shop").delegate(".pagination a","click",function(a){a.preventDefault(),$("#review_shop").fadeOut("slow"),$("#review_shop").load(this.href),$("#review_shop").fadeIn("slow")}),$(document).on("submit","form.review-form",function(a){a.preventDefault();var b=$(this);$.ajax({url:"index.php?route=extension/module/aridius_store_review/write",type:"post",dataType:"json",data:b.serialize(),beforeSend:function(){b.find(".button-review_shop").button("loading")},complete:function(){b.find(".button-review_shop").button("reset")},success:function(a){$(".alert-success, .alert-danger").remove(),a.error&&b.find(".review_shop").after('<div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> '+a.error+"</div>"),a.success&&(b.find(".review_shop").after('<div class="alert alert-success"><i class="fa fa-check-circle"></i> '+a.success+"</div>"),b.find("input[name='name']").val(""),b.find("textarea[name='text']").val(""),b.find("input[name='rating']:checked").prop("checked",!1),setTimeout(function(){$(".reply-form").remove()},2500))}})}),$(document).on("click",".cancel-review",function(){$(".reply-form").remove()}),$(document).on("click",".comment-reply",function(){var a=$(this);$.post("index.php?route=extension/module/aridius_store_review/reply",{parent:a.attr("data-parent")},function(b){$(".reply-form").remove(),a.parent().append('<div class="reply-form">'+b.html+"</div>")},"json")});
</script>
<script>
function hide_show(a,b){var c=document.querySelector(b);c.style.display="none"==c.style.display?"block":"none",a.currentTarget.style.display="none"}
</script>
<script>
$(function(){$(".rating-tooltip").ar_rating({extendSymbol:function(a){$(this).tooltip({container:"body",placement:"bottom",title:a})}})});
</script>
{% endif %}
{{ footer }}